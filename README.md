"# Apache-Camel-ActiveMQ-Spring-Integration-Task" 

## Задача Spring + Apache Camel

Приложение читает файлы из папки средствами Apache Camel.
В зависимости от типа файла выполняются некоторые действия:
	- если файл имеет расширение txt -> отправлять файл в txtQueue Embedded ActiveMQ брокера;
	- если файл имеет расширение xml -> парсим файл с помощью jaxb и отправляем в xmlQueue Embedded ActiveMQ брокера;
	- если файл имеет любое другое расширение -> выбрасывать исключение и записывать файл в errorQueue Embedded ActiveMQ брокера;
	
Далее происходит вычитка очередей из Embedded ActiveMQ брокера:
	- txtQueue -> логируем тело сообщения, логи пишем в файл;
	- xmlQueue -> записываем тело сообщения в БД в таблицу body, заголовки логируем в таблицу headers.
	  Связь между таблицами осуществялется с помощью внешнего ключа;
	- errorQueue -> оставляем сопровождению ;)
	
При обработке каждого сотого файла отсылать письмо, содержащее количество файлов txt, количество файлов xml
и количество нераспознанных файлов;
Настройку, запуск, конфигурирование осуществлять при помощи средств Spring Framework.


## Запуск и настройка

Приложение запускается как Spring Boot Application. Основные настройки находятся в файле src/main/resources/application.properties. 
Приложение читает файлы из директории input, в которой находятся тестовые файлы разных форматов с входными данными. 
Директория logs, в которой хранятся логи приложения и директория db для базы данных, будут созданы автоматически после первого старта приложения.
